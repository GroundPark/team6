package challenge.act;

import javax.servlet.http.*;
import challenge.vo.*;
import java.util.*;
import challenge.svc.*;
import java.io.*;
import java.net.*;

public class ChallengePreviewAct implements Action{
	public ActionForward execute(HttpServletRequest request, HttpServletResponse response) throws Exception{
		request.setCharacterEncoding("utf-8");
		int idx = Integer.parseInt(request.getParameter("idx"));		// 글번호 : 필수라 바로 형변환 가능
		int cpage = Integer.parseInt(request.getParameter("cpage"));
		
		// String schtype = request.getParameter("schtype");	// 검색조건
		// String keyword = request.getParameter("keyword");	// 검색어
		
		String args ="?idx=" + idx + "&cpage=" + cpage ;
		// if(schtype != null && keyword != null && !schtype.equals("") && !keyword.equals("")){
		//	 args += "&schtype=" + schtype + "&keyword=" + URLEncoder.encode(keyword, "UTF-8");
		// }		// 조건은 있는 경우에만 쿼리스트링으로 연결시킴
		
		NoticePreviewSvc noticePreviewsvc = new NoticePreviewSvc();
		int result = noticePreviewsvc.readcntUpdate(idx);
		
		
		ActionForward forward = new ActionForward();
		forward.setRedirect(true);
		forward.setPath("/page/challenge/chal_view.chal" + args);
		
		return forward;
	}
}
