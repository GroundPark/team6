package challenge.act;

import javax.servlet.http.*;
import vo.*;
import java.util.*;
import challenge.svc.*;
import java.io.*;

public class ChallengeReplyInAct implements Action{
	public ActionForward execute(HttpServletRequest request, HttpServletResponse response) throws Exception{
		request.setCharacterEncoding("utf-8");
	
		HttpSession session = request.getSession();
		MemberInfo memberInfo = (MemberInfo)session.getAttribute("memberInfo");
		
		String miid = memberInfo.getMi_id();
		String cridx = request.getParameter("cridx");
		String crcontent = request.getParameter("crcontent");
		
	
		
		ChallengeViewSvc challengeViewSvc = new ChallengeViewSvc();		
		// 댓글 관련 in,up,del 하기 전 검사는 귀찮아서 안함
		
		
		challengeReplyList = challengeViewSvc.getChallengeDetailReplyList(idx);
		
		//ChallengeReplyList challengeReply = challengeViewSvc.getChallengeDetailReplyList(idx);
		
		
		challengePageInfo.setCpage(cpage);                    
		challengePageInfo.setSort(sort);
		// challengePageInfo.setPsize(psize); 	
		
		// request.setAttribute("challenge", challenge);
		request.setAttribute("challengePageInfo", challengePageInfo);
		request.setAttribute("challengeDetail", challengeDetail);
		// request.setAttribute("challengeReply", challengeReply);
		request.setAttribute("challengeReplyList", challengeReplyList);
		// view로 가져갈 인스턴스를 request 객체의 attribute으로 저장함
		
		ActionForward forward = new ActionForward();
		forward.setPath("/page/challenge/chal_funding_view.jsp");

		
		return forward;
	}
}